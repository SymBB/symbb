services:
    symbb.listener.post.survey.template:
        class: Symbb\Extension\SurveyBundle\EventListener\TemplateListener
        arguments: ['@doctrine.orm.symbb_entity_manager']
        tags:
            - { name: kernel.event_listener, event: symbb.post.template.form.options.tabs, method: addPostTab }
            - { name: kernel.event_listener, event: symbb.post.template.form.options.tabcontents, method: addPostTabContent }
            - { name: kernel.event_listener, event: symbb.topic.template.form.options.tabs, method: addTopicTab }
            - { name: kernel.event_listener, event: symbb.topic.template.form.options.tabcontents, method: addTopicTabContent }
            - { name: kernel.event_listener, event: symbb.post.template.before.text, method: addSurveyBlock }
            - { name: kernel.event_listener, event: symbb.template.global.stylesheets, method: stylesheets }

    symbb.extension.survey.listener.post.form:
        class: Symbb\Extension\SurveyBundle\EventListener\FormListener
        tags:
            - { name: kernel.event_listener, event: symbb.post.controller.form, method: postForm }

    symbb.listener.post.survey.save:
        class: Symbb\Extension\SurveyBundle\EventListener\SaveListener
        arguments: ['@doctrine.orm.symbb_entity_manager', '@symbb.core.user.manager']
        tags:
            - { name: kernel.event_listener, event: symbb.api.post.after.save, method: savePost }
            - { name: kernel.event_listener, event: symbb.api.post.data, method: dataPost }
            - { name: kernel.event_listener, event: symbb.api.topic.after.save, method: saveTopic }
            - { name: kernel.event_listener, event: symbb.api.topic.data, method: dataTopic }
            
    symbb.listener.topic.labels:
        class: Symbb\Extension\SurveyBundle\EventListener\TopicLabelListener
        arguments: ['@doctrine.orm.symbb_entity_manager']
        tags:
            - { name: kernel.event_listener, event: symbb.topic.labels, method: topicLabels }


    symbb.extension.survey.security.access.survey_voter:
        class:      Symbb\Extension\SurveyBundle\Security\Authorization\SurveyVoter
        public:     false
        arguments: ['@symbb.core.access.manager']
        tags:
           - { name: security.voter }
            
            
            